<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="心之所向 步履维艰">
<meta property="og:type" content="website">
<meta property="og:title" content="管弦丝竹，余音袅袅">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="管弦丝竹，余音袅袅">
<meta property="og:description" content="心之所向 步履维艰">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="管弦丝竹，余音袅袅">
<meta name="twitter:description" content="心之所向 步履维艰">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'glinlf'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> 管弦丝竹，余音袅袅 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '',
      xfbml      : true,
      version    : 'v2.6'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/zh_Hans/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>















  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">管弦丝竹，余音袅袅</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/22/springboot/2017-05-22-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/22/springboot/2017-05-22-1/" itemprop="url">
                  2017-05-22-1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-22T14:09:00+08:00">
                2017-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springboot/" itemprop="url" rel="index">
                    <span itemprop="name">springboot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/22/springboot/2017-05-22-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/22/springboot/2017-05-22-1/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#springboot启动器</p>
<p>Spring Boot应用启动器基本的一共有（现知道的是44）种：具体如下：</p>
<p>1）spring-boot-starter<br>这是Spring Boot的核心启动器，包含了自动配置、日志和YAML。<br>2）spring-boot-starter-actuator<br>帮助监控和管理应用。<br>3）spring-boot-starter-amqp<br>通过spring-rabbit来支持AMQP协议（Advanced Message Queuing Protocol）。<br>4）spring-boot-starter-aop<br>支持面向方面的编程即AOP，包括spring-aop和AspectJ。<br>5）spring-boot-starter-artemis<br>通过Apache Artemis支持JMS的API（Java Message Service API）。<br>6）spring-boot-starter-batch<br>支持Spring Batch，包括HSQLDB数据库。<br>7）spring-boot-starter-cache<br>支持Spring的Cache抽象。<br>8）spring-boot-starter-cloud-connectors<br>支持Spring Cloud Connectors，简化了在像Cloud Foundry或Heroku这样的云平台上连接服务。<br>9）spring-boot-starter-data-elasticsearch<br>支持ElasticSearch搜索和分析引擎，包括spring-data-elasticsearch。<br>10）spring-boot-starter-data-gemfire<br>支持GemFire分布式数据存储，包括spring-data-gemfire。<br>11）spring-boot-starter-data-jpa<br>支持JPA（Java Persistence API），包括spring-data-jpa、spring-orm、Hibernate。<br>12）spring-boot-starter-data-mongodb<br>支持MongoDB数据，包括spring-data-mongodb。<br>13）spring-boot-starter-data-rest<br>通过spring-data-rest-webmvc，支持通过REST暴露Spring Data数据仓库。<br>14）spring-boot-starter-data-solr<br>支持Apache Solr搜索平台，包括spring-data-solr。<br>15）spring-boot-starter-freemarker<br>支持FreeMarker模板引擎。<br>16）spring-boot-starter-groovy-templates<br>支持Groovy模板引擎。<br>17）spring-boot-starter-hateoas<br>通过spring-hateoas支持基于HATEOAS的RESTful Web服务。<br>18）spring-boot-starter-hornetq<br>通过HornetQ支持JMS。<br>19）spring-boot-starter-integration<br>支持通用的spring-integration模块。<br>20）spring-boot-starter-jdbc<br>支持JDBC数据库。<br>21）spring-boot-starter-jersey<br>支持Jersey RESTful Web服务框架。<br>22）spring-boot-starter-jta-atomikos<br>通过Atomikos支持JTA分布式事务处理。<br>23）spring-boot-starter-jta-bitronix<br>通过Bitronix支持JTA分布式事务处理。<br>24）spring-boot-starter-mail<br>支持javax.mail模块。<br>25）spring-boot-starter-mobile<br>支持spring-mobile。<br>26）spring-boot-starter-mustache<br>支持Mustache模板引擎。<br>27）spring-boot-starter-redis<br>支持Redis键值存储数据库，包括spring-redis。<br>28）spring-boot-starter-security<br>支持spring-security。<br>29）spring-boot-starter-social-facebook<br>支持spring-social-facebook<br>30）spring-boot-starter-social-linkedin<br>支持pring-social-linkedin<br>31）spring-boot-starter-social-twitter<br>支持pring-social-twitter<br>32）spring-boot-starter-test<br>支持常规的测试依赖，包括JUnit、Hamcrest、Mockito以及spring-test模块。<br>33）spring-boot-starter-thymeleaf<br>支持Thymeleaf模板引擎，包括与Spring的集成。<br>34）spring-boot-starter-velocity<br>支持Velocity模板引擎。<br>35）spring-boot-starter-web<br>S支持全栈式Web开发，包括Tomcat和spring-webmvc。<br>36）spring-boot-starter-websocket<br>支持WebSocket开发。<br>37）spring-boot-starter-ws<br>支持Spring Web Services。</p>
<p>Spring Boot应用启动器面向生产环境的还有2种，具体如下：<br>1）spring-boot-starter-actuator<br>增加了面向产品上线相关的功能，比如测量和监控。<br>2）spring-boot-starter-remote-shell<br>增加了远程ssh shell的支持。</p>
<p>最后，Spring Boot应用启动器还有一些替换技术的启动器，具体如下：<br>1）spring-boot-starter-jetty<br>引入了Jetty HTTP引擎（用于替换Tomcat）。<br>2）spring-boot-starter-log4j<br>支持Log4J日志框架。<br>3）spring-boot-starter-logging<br>引入了Spring Boot默认的日志框架Logback。<br>4）spring-boot-starter-tomcat<br>引入了Spring Boot默认的HTTP引擎Tomcat。<br>5）spring-boot-starter-undertow<br>引入了Undertow HTTP引擎（用于替换Tomcat）。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/22/springboot/2017-05-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/22/springboot/2017-05-22/" itemprop="url">
                  Mon May 22 2017 00:00:00 GMT+0800 (中国标准时间)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-22T10:25:00+08:00">
                2017-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springboot/" itemprop="url" rel="index">
                    <span itemprop="name">springboot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/22/springboot/2017-05-22/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/22/springboot/2017-05-22/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#spring boot 之Controller简单单元测试（RESTful API）</p>
<p>MocMvc做为服务端测试类，功能十分强大；在spring全家桶中，在springMVC和springboot中都可以使用，用法十分相似。</p>
<ul>
<li>首先需要在pom.xml中加入依赖配置。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">           &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</div><div class="line">           &lt;scope&gt;test&lt;/scope&gt;</div><div class="line">       &lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>###第一种使用注解方法注入MocMvc<br>//@RunWith(SpringJUnit4ClassRunner.class) SpringRunner extends SpringJUnit4ClassRunner<br>@RunWith(SpringRunner.class)<br>@WebAppConfiguration //支持web项目注解<br>@SpringBootTest////(classes = DemoApplication.class, webEnvironment = SpringBootTest.WebEnvironment.MOCK)指定SpringBoot工程的Application启动类<br>@AutoConfigureMockMvc<br>public class TestController {<br>    @Autowired<br>    private MockMvc mockMvc;<br>    @Autowired<br>    private UserService userService;</p>
<pre><code>@Test
public void testUser() throws Exception {
    //提交请求 构建RequestBuilder对象，模拟request请求
    RequestBuilder request = null;
    request = MockMvcRequestBuilders.get(&quot;/&quot;);
    mockMvc.perform(request).andExpect(status().isOk()).andReturn();
    mockMvc.perform((post(&quot;/hello&quot;))).andExpect(status().isOk())
            .andDo(print()).andReturn();
}
</code></pre><p>###第二种手动注入MocMvc（分为集成web环境和独立测试方式）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@RunWith(SpringRunner.class)</div><div class="line">@WebAppConfiguration //支持web项目注解</div><div class="line">@SpringBootTest////(classes = DemoApplication.class, webEnvironment = SpringBootTest.WebEnvironment.MOCK)指定SpringBoot工程的Application启动类</div><div class="line">public class TestController &#123;</div><div class="line">    private MockMvc mockMvc;</div><div class="line">    @Autowired</div><div class="line">    private WebApplicationContext wac;</div><div class="line"></div><div class="line">//集成Web环境方式 ()</div><div class="line">    @Before</div><div class="line">    public void setUp() &#123;</div><div class="line">        this.mockMvc = webAppContextSetup(this.wac).build();</div><div class="line">    &#125;</div><div class="line">    //独立测试</div><div class="line">        //@Before</div><div class="line">    //public void setUp() &#123;</div><div class="line">    //    IndexController indexController =new IndexController();</div><div class="line">    //    this.mockMvc = MockMvcBuilders.standaloneSetup(indexController).build();</div><div class="line">    //&#125;</div><div class="line"></div><div class="line">    @Test</div><div class="line">    public void testUser() throws Exception &#123;</div><div class="line">        //提交请求 构建RequestBuilder对象，模拟request请求</div><div class="line">        RequestBuilder request = null;</div><div class="line">        request = MockMvcRequestBuilders.get(&quot;/&quot;);</div><div class="line">        mockMvc.perform(request).andExpect(status().isOk()).andReturn();</div><div class="line">        mockMvc.perform((post(&quot;/hello&quot;))).andExpect(status().isOk())</div><div class="line">                .andDo(print()).andReturn();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>1、@WebAppConfiguration：测试环境使用，用来表示测试环境使用的ApplicationContext将是WebApplicationContext类型的；value指定web应用的根；<br>2、通过@Autowired WebApplicationContext wac：注入web环境的ApplicationContext容器；<br>3、然后通过MockMvcBuilders.webAppContextSetup(wac).build()创建一个MockMvc进行测试；</p>
</blockquote>
<ul>
<li>几个常用的方法：</li>
</ul>
<blockquote>
<p> perform：执行一个RequestBuilder请求，会自动执行SpringMVC的流程并映射到相应的控制器执行处理；<br>andExpect：添加ResultMatcher验证规则，验证控制器执行完成后结果是否正确；<br>andDo：添加ResultHandler结果处理器，比如调试时打印结果到控制台；<br>andReturn：最后返回相应的MvcResult；然后进行自定义验证/进行下一步的异步处理；</p>
</blockquote>
<ul>
<li>参考</li>
</ul>
<p><a href="https://my.oschina.net/u/2356966/blog/834661" target="_blank" rel="external">spring boot 基于Controller自动化测试demo</a><br><a href="http://blog.csdn.net/xiao_xuwen/article/details/52890730" target="_blank" rel="external">Junit学习笔记之五：MockMVC</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/21/springboot/2017-05-21-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/21/springboot/2017-05-21-1/" itemprop="url">
                  2017-05-21-1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-21T18:38:00+08:00">
                2017-05-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springboot/" itemprop="url" rel="index">
                    <span itemprop="name">springboot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/21/springboot/2017-05-21-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/21/springboot/2017-05-21-1/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="springboot-将默认web容器tomcat-换成-jetty"><a href="#springboot-将默认web容器tomcat-换成-jetty" class="headerlink" title="springboot 将默认web容器tomcat 换成 jetty"></a>springboot 将默认web容器tomcat 换成 jetty</h1><blockquote>
<p>springboot框架默认集成（tomcat或jetty）web容器，web容器也使用默认配置，不过也可在配置文件（application.properties）中进行重写覆盖；springboot项目的启动方式和java程序类似，使用main（）方法启动非常方便快捷（也可以使用maven命令启动 mvn spring- boot:run）。框架默认使用tomcat容器，下面介绍如何将默认容器tomcat换成jetty容器。</p>
</blockquote>
<p>###第一步修改pom.xml的配置，将原来的默认的tomcat依赖配置去掉；新增jetty依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;dependencies&gt;</div><div class="line">    		&lt;dependency&gt;</div><div class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</div><div class="line">			&lt;!--把pom中的tomcat依赖排除--&gt;</div><div class="line">			&lt;exclusions&gt;</div><div class="line">				&lt;exclusion&gt;</div><div class="line">					&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">					&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;</div><div class="line">				&lt;/exclusion&gt;</div><div class="line">			&lt;/exclusions&gt;</div><div class="line">		&lt;/dependency&gt;</div><div class="line">	&lt;!--增加jetty依赖--&gt;</div><div class="line">		&lt;dependency&gt;</div><div class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">			&lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;</div><div class="line">		&lt;/dependency&gt;</div><div class="line">&lt;/dependencies&gt;</div></pre></td></tr></table></figure>
<p>###第二步（方法一）在(DemoApplication.java命名可能不同)启动类中继承SpringBootServletInitializer类重写configure（）方法；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@SpringBootApplication</div><div class="line">public class DemoApplication extends SpringBootServletInitializer &#123;</div><div class="line">	@Override</div><div class="line">	protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) &#123;</div><div class="line">		return builder.sources(this.getClass());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public static void main(String[] args) &#123;</div><div class="line">		SpringApplication.run(DemoApplication.class, args);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###第二步（方法二）注入Jetty容器的管理Bean，在(DemoApplication.java命名可能不同)启动类中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">@SpringBootApplication</div><div class="line">public class DemoApplication &#123;</div><div class="line"></div><div class="line">	@Bean</div><div class="line">	public EmbeddedServletContainerFactory servletContainer() &#123;</div><div class="line">		JettyEmbeddedServletContainerFactory factory =</div><div class="line">		new JettyEmbeddedServletContainerFactory();</div><div class="line">		return factory;</div><div class="line">	&#125;</div><div class="line">	public static void main(String[] args) &#123;</div><div class="line">		SpringApplication.run(DemoApplication.class, args);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="内置服务器配置覆盖说明使用可参见其他blog；项目亦可打包成war包手动放置web容器（tomcat，weblogic等）中进行项目部署。"><a href="#内置服务器配置覆盖说明使用可参见其他blog；项目亦可打包成war包手动放置web容器（tomcat，weblogic等）中进行项目部署。" class="headerlink" title="内置服务器配置覆盖说明使用可参见其他blog；项目亦可打包成war包手动放置web容器（tomcat，weblogic等）中进行项目部署。"></a>内置服务器配置覆盖说明使用可参见其他blog；项目亦可打包成war包手动放置web容器（tomcat，weblogic等）中进行项目部署。</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/21/springboot/2017-05-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/21/springboot/2017-05-21/" itemprop="url">
                  Sun May 21 2017 00:00:00 GMT+0800 (中国标准时间)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-21T15:09:00+08:00">
                2017-05-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springboot/" itemprop="url" rel="index">
                    <span itemprop="name">springboot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/21/springboot/2017-05-21/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/21/springboot/2017-05-21/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#how to use idea create a springboot web project</p>
<blockquote>
<p>第一步：打开idea，点检File–&gt;New–&gt;project</p>
<p>第二步：</p>
</blockquote>
<p><img src="http://oo4xlamjr.bkt.clouddn.com/19-07-57.jpg" alt="images"></p>
<blockquote>
<p>第三步：</p>
</blockquote>
<p><img src="http://oo4xlamjr.bkt.clouddn.com/19-11-49.jpg" alt="images"></p>
<blockquote>
<p>第四步：</p>
</blockquote>
<p><img src="http://oo4xlamjr.bkt.clouddn.com/19-13-02.jpg" alt="images"></p>
<blockquote>
<p>第五步：</p>
</blockquote>
<p><img src="http://oo4xlamjr.bkt.clouddn.com/19-14-03.jpg" alt="images"></p>
<blockquote>
<p>第六步：生成的项目结构</p>
</blockquote>
<p><img src="http://oo4xlamjr.bkt.clouddn.com/19-41-25.jpg" alt="images"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/14/jvm/JVM/2017-05-14-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/14/jvm/JVM/2017-05-14-1/" itemprop="url">
                  JVM概况了解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-14T17:54:00+08:00">
                2017-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JVM/" itemprop="url" rel="index">
                    <span itemprop="name">JVM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/14/jvm/JVM/2017-05-14-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/14/jvm/JVM/2017-05-14-1/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JVM了解学习"><a href="#JVM了解学习" class="headerlink" title="JVM了解学习"></a>JVM了解学习</h1><p>   Java程序的跨平台特性主要是指字节码文件可以在任何具有Java虚拟机的计算机或者电子设备上运行，Java虚拟机中的Java解释器负责将字节码文件解释成为特定的机器码进行运行。因此在运行时，Java源程序需要通过编译器编译成为.class文件。众所周知java.exe是Java class文件的执行程序，但实际上java.exe程序只是一个执行的外壳，它会装载jvm.dll（windows下，下皆以windows平台为例，Linux下和solaris下其实类似，为：libjvm.so），这个动态连接库才是java虚拟机的实际操作处理所在。<br>    JVM是JRE的一部分。它是一个虚构出来的计算机，是通过在实际的计算机上仿真模拟各种计算机功能来实现的。JVM有自己完善的硬件架构，如处理器、堆栈、寄存器等，还具有相应的指令系统。Java语言最重要的特点就是跨平台运行。使用JVM就是为了支持与操作系统无关，实现跨平台。所以，JAVA虚拟机JVM是属于JRE的，而现在我们安装JDK时也附带安装了JRE(当然也可以单独安装JRE)。</p>
<p>JVM = 类加载器 classloader + 执行引擎 execution engine + 运行时数据区域 runtime data areaclassloader 把硬盘上的class 文件加载到JVM中的运行时数据区域, 但是它不负责这个类文件能否执行，而这个是 执行引擎 负责的。</p>
<p>##类加载器：<br>作用：装载.class文件classloader 有两种装载class的方式 （时机）：<br>隐式：运行过程中，碰到new方式生成对象时，隐式调用classLoader到JVM<br>显式：通过class.forname()动态加载<br>类加载器 classloader 是具有层次结构的，也就是父子关系。其中，Bootstrap 是所有类加载器的父亲。这个类加载器不是用 java 语言写的，而是用 C/C++ 写的。</p>
<p>##执行引擎：<br>作用： 执行字节码，或者执行本地方法</p>
<p>##运行时数据区：主要包括：<br>   Java虚拟机栈：java 虚拟机栈也是线程私有的。每一个 JVM 线程都有自己的 java 虚拟机栈，这个栈与线程同时创建，它的生命周期与线程相同。虚拟机栈描述的是Java 方法执行的内存模型：每个方法被执行的时候都会同时创建一个栈帧（Stack Frame）用于存储局部变量表、操作数栈、动态链接、方法出口等信息。每一个方法被调用直至执行完成的过程就对应着一个栈帧在虚拟机栈中从入栈到出栈的过程<br>    本地方法栈：与虚拟机栈的作用相似，虚拟机栈为虚拟机执行执行java方法服务，而本地方法栈则为虚拟机使用到的本地方法服务。<br>    java堆：被所有线程共享的一块存储区域，在虚拟机启动时创建，它是JVM用来存储对象实例以及数组值的区域，可以认为Java中所有通过new创建的对象的内存都在此分配。（JVM将Heap分为两块：新生代New Generation和旧生代Old Generation），<br>    PC程序计数器：一块较小的内存空间，可以看做是当前线程所执行的字节码的行号指示器, NAMELY存储每个线程下一步将执行的JVM指令，如该方法为native的，则PC寄存器中不存储任何信息。Java 的多线程机制离不开程序计数器，每个线程都有一个自己的PC，以便完成不同线程上下文环境的切换。<br>    方法区：方法区和堆区域一样，是各个线程共享的内存区域，它用于存储每一个类的结构信息，例如运行时常量池，成员变量和方法数据，构造函数和普通函数的字节码内容，还包括一些在类、实例、接口初始化时用到的特殊方法。当开发人员在程序中通过Class对象中的getName、isInstance等方法获取信息时，这些数据都来自方法区。<br>    运行时常量池：（其空间从方法区中分配，存放的为类中固定的常量信息、方法和域的引用信息）<br>参见个人学习整理的<a href="">JVM运行时数据区域总结</a></p>
<p>##垃圾回收机制GC。<br>垃圾回收机制是由垃圾收集器Garbage Collection GC来实现的，GC是后台的守护进程。垃圾回收是一种动态存储管理技术，它自动地释放不再被程序引用的对象，按照特定的垃圾收集算法来实现资源自动回收的功能。当一个对象不再被引用的时候，内存回收它占领的空间，以便空间被后来的新对象使用，以免造成内存泄露。<br><a href="">参考个人GC学习总结</a></p>
<p><a href="https://segmentfault.com/a/1190000002579346" target="_blank" rel="external">JVM 的 工作原理，层次结构 以及 GC工作原理</a><br><a href="http://www.cnblogs.com/gw811/archive/2012/10/18/2730117.html" target="_blank" rel="external">Java内存管理：深入Java内存区域</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/11/hibernate/2017-05-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/11/hibernate/2017-05-11/" itemprop="url">
                  hibernate学习笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-11T18:35:00+08:00">
                2017-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hibernate/" itemprop="url" rel="index">
                    <span itemprop="name">hibernate</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/11/hibernate/2017-05-11/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/11/hibernate/2017-05-11/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="hibernate学习笔记"><a href="#hibernate学习笔记" class="headerlink" title="hibernate学习笔记"></a>hibernate学习笔记</h1><p>1.Hibernate里不对对象或集合对象重载toString方法，不然编译错误 。Stackoverflow错误 栈溢出</p>
<p>2.什么是维护关联关系：<br>一对多时候   设置外键的值<br>多对多时候    就是插入或删除中间表的记录</p>
<p>3对象的状态：</p>
<p>临时状态：<br>    与数据库没有对应，跟Session没有关联。<br>    一般是新new出的对象。</p>
<p>持久化状态：<br>    对象在Session的管理之中，最终会有对应的数据库记录。<br>    特点：<br>        a，有OID<br>        b，对对象的修改会同步到数据库。</p>
<p>游离状态：<br>    数据库中有对应记录，但对象不在Session管理之中。<br>    修改此状态对象时数据库不会有变化。</p>
<p>4.主键id的生成</p>
<!-- id元素用于映射主键。子元素generator是用于指定主键生成策略的。-->
<pre><code>&lt;id name=&quot;id&quot;&gt;
</code></pre><!-- identity：使用数据库的自动增长策略，不是所有数据库都支持，比如oracle就不支持 <generator class="identity"/>-->
<!-- sequence：在 DB2，PostgreSQL，Oracle，SAP DB，McKoi 中使用序列（sequence）在使用Oracle数据库时可以使用这一个<generator class="sequence"/>-->
<!-- hilo，使用高低位算法生成主键值。只需要一张额外表，所有的数据都支持。
            <generator class="hilo">
                <param name="table">hi_value</param>
                <param name="column">next_value</param>
                <param name="max_lo">100</param>
            </generator>
-->
<!-- 根据底层数据库的能力选择 identity、sequence 或者 hilo中的一个。
<generator class="native"></generator>
-->
<!-- increment：由Hibernate维护的自动增长。先查询当前最大的id值，再加1使用，不推荐使用，因为在多线程下会问题。
            <generator class="increment"></generator>
-->
<!-- assigned：手工指定主键值 
<generator class="assigned"></generator>
-->
<!-- uuid：由Hibernate自动生成UUID并指定为主键值。  -->
<generator class="uuid"></generator><br><br><br><br>5.数据库sql的四个级别：<br>读未提交             1        0001<br>读已提交             2        0010<br>可重复度             4        0100<br>串行化（不可并发）   8        1000<br><br>6.一对一：<br><br>外键约束 + 唯一性约束<br><br>比较特殊只有有外键方的一方才能维护关联关系<br>所有解除关联是，没外键的一方解除无效。<br><br>基于外键的一对一<br><br>基于主键的一对一<br><br><!-- 当使用基于主键的一对一映射时，有外键方的主键生成策略一定要是foreign。参数property：生成主键值时所根据的对象。--><br>            <generator class="foreign"><br>                <param name="property">person<br>            </generator>

<ol>
<li>在having中不能使用列别名，order by 可以用</li>
</ol>
<p>8.java中为什么要给类使用代理，有什么好处</p>
<p><a href="http://www.iteye.com/problems/15304" target="_blank" rel="external">http://www.iteye.com/problems/15304</a></p>
<p>9.懒加载：</p>
<pre><code>也叫延迟加载，不是在执行获取操作时马上生成SQL，而是在第一次使用时生成SQL。
分成两种：
    类级别的：
        &lt;class ... lazy=&quot;true/false&quot;&gt;
    属性级别的：
        &lt;set/list/map/bag ... lazy=&quot;...&quot;&gt;
        &lt;many-to-one ... lazy=&quot;...&quot;&gt;
        &lt;one-to-one ... lazy=&quot;...&quot;&gt;
在使用懒加载特性时，可能会有LazyInitializationException异常：
    原因：   
        真正的去获取数据时，Session已经没有了。
    解决办法：
        方式一：让Session在真正加载后再关闭。
        方式二：或是在Sessoin关闭前执行Hibernate.initialize(department.getEmployees());
</code></pre><p>extra策略：（加强懒加载）  注意！！！<br>与 lazy=“true” 类似. 主要区别是增强延迟检索策略能进一步延迟 Customer 对象的 orders 集合代理实例的初始化时机：<br>•    当程序第一次访问 orders 属性的 iterator() 方法时, 会导致 orders 集合代理类实例的初始化<br>•    当程序第一次访问 order 属性的 size(), contains() 和 isEmpty() 方法时, Hibernate 不会初始化 orders 集合类的实例,<br>仅通过特定的 select 语句查询必要的信息, 不会检索所有的 Order 对象</p>
<p>10.缓存是按id来查询的！  （使用id获得对象 才有效）<br>一级缓存  相对于类对象，<br>二级缓存  相对于sessionfactory，应用级别的缓存。在session查询数据库前的缓存</p>
<p>注意！！！<br>  对于集合里的二级缓存，不仅要声明此时对象里的集合属性要二级缓存，而且集合里的对应类型对象也要声明是二级缓存。这样才能实现二级缓存的效果！<br>不然的话虽然第一次查询这个集合里的所有数据，第二次查询是集合里的对象所对应的属性还是要再按照其自身的id依次查询（生成对个sql语句），不好。</p>
<p>缓存一般使用在load和get方法<br>query.list()查询方法默认不使用缓存。就算hql语句后又where id=。。。都不行。<br>1.如果要使用query.list()那么要使用迭代器 iterator()；不过有n+1次查询问题，不常用！！！<br>2.也可以使用 .setCacheable(true)// 是否使用查询缓存，需要在hibernate.cfg.xml中开启查询缓存才行(不过hql条件要一致)</p>
<pre><code>1. select new list(p.name, p.address) from Person as p ;
</code></pre><p>select将选择出来的属性存入一个List对象中</p>
<p>select new ClassTest(p.name, p.address) from Person as p;<br>select将选择出来的属性封装成对象,前提是ClassTest支持p.name, p.address的构造函数,</p>
<p>select new map(p.name as personName) from Person as p ;<br>select将选中的表达式命名为别名,这种用法与new map()结合,选择出来的是Map结构,<br>以personName为key,将实际选择出来的值作为value</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/10/java/java数据类型/2017-05-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/10/java/java数据类型/2017-05-10/" itemprop="url">
                  java的基本数据类型和引用类型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-10T11:48:00+08:00">
                2017-05-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/10/java/java数据类型/2017-05-10/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/10/java/java数据类型/2017-05-10/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="java的基本数据类型和引用类型"><a href="#java的基本数据类型和引用类型" class="headerlink" title="java的基本数据类型和引用类型"></a>java的基本数据类型和引用类型</h1><p>   基本类型：简单数据类型是不能简化的、内置的数据类型、由编程语言本身定义，它表示了真实的数字、字符和整数。<br>　引用数据类型：Java语言本身不支持C++中的结构（struct）或联合（union）数据类型，它的复合数据类型一般都是通过类或接口进行构造，类提供了捆绑数据和方法的方式，同时可以针对程序外部进行信息隐藏</p>
<h2 id="一、8种基本基本数据类型（分布尔类型和数值类型）。"><a href="#一、8种基本基本数据类型（分布尔类型和数值类型）。" class="headerlink" title="一、8种基本基本数据类型（分布尔类型和数值类型）。"></a>一、8种基本基本数据类型（分布尔类型和数值类型）。</h2><p>1、4种整型<br>    byte       1字节           -128——127<br>    short      2 字节         -32,768 —— 32,767<br>    int          4 字节          -2,147,483,648 ——            2,147,483,647（超过20亿）<br>    long       8 字节  -9,223,372,036,854,775,808——9,223,372,036854,775,807<br>    注释：java中所有的数据类所占据的字节数量与平台无关，java也没有任何无符号类型<br>2、 2种浮点类型<br>    float      4 字节         32位IEEE 754单精度（有效位数 6 – 7位）<br>    double   8 字节         64位IEEE 754双精度（有效位数15位）<br>3、1种Unicode编码的字符单元<br>    char      2 字节          整个Unicode字符集<br>4、1种真值类型<br>   boolean    1 位             true或者false </p>
<p>##二、种引用类型<br>类class<br>接口interface<br>数组array </p>
<p>##三、Java数据类型在内存中的存储：<br>  给变量赋值前需要先确定变量的类型，确定了变量的类型，即确定了数据需分配内存空间的大小，数据在内存的存储方式。<br>1）基本数据类型的存储原理：所有的简单数据类型不存在“引用”的概念，基本数据类型都是直接存储在内存中的内存栈上的，数据本身的值就是存储在栈空间里面，而Java语言里面八种数据类型是这种存储模型；</p>
<p>2）引用类型的存储原理:引用类型继承于Object类（也是引用类型）都是按照Java里面存储对象的内存模型来进行数据存储的，使用Java内存堆和内存栈来进行这种类型的数据存储，简单地讲，“引用”是存储在有序的内存栈上的（存储对象地址），而对象本身（实例化后的对象）的值存储在内存堆上的；</p>
<p>区别:基本数据类型和引用类型的区别主要在于基本数据类型是分配在栈上的，而引用类型是分配在堆上的()（需要java中的栈、堆概念）</p>
<p>四、“==”和equal()对数据类型的分析:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">eg1:定义两个String对象（String不是基本数据类型）</div><div class="line">//String是一个特殊的包装类数据。可以用以下两种方式创建：</div><div class="line">//String str = new String(“abc”)；String str = “abc”;</div><div class="line">String a=&quot;abc&quot;;//栈中的a引用变量指向JVM运行时数据区区域方法区的常量池中的“abc”。</div><div class="line">String b=&quot;abc&quot;;//栈中的b引用变量也指向方法区中的常量池中的&quot;abc&quot;，和a指向的地址一样</div><div class="line">String c = new String(&quot;abc&quot;); </div><div class="line">//new一个新的String实例对象，引用变量c指向实例化对象new String(&quot;abc&quot;)的地址，该实例化对象存储在堆中[ **实际该地址指针（地址存在堆中）指向此对象类型数据（存在方法区中数据值）即abc**]，这和存在常量池的“abc”值得地址不一样。</div><div class="line"></div><div class="line">if(a==b)&#123;</div><div class="line">System.out.println(&quot;a==b&quot;);</div><div class="line">&#125;else&#123;</div><div class="line">System.out.println(&quot;a!=b&quot;);&#125;</div><div class="line">System.out.printLn(a==c)</div></pre></td></tr></table></figure></p>
<p>结果：<br>程序输出a==b<br>           flase<br>原因:a和b引用变量指向的地址的是相同的，a==b比较的是两个引用变量所指向的地址。<br>        a和c引用变量指向的地址的是不相同的，a指向常量区中的abc，c指向新开辟在堆内存中的String对象实例中的abc实例对象中数据值得地址；两个地址不同，==比较返回false。<br>        <a href="">images</a><br><img src="~/12-58-16.jpg" alt="images"></p>
<p><img src="~/12-56-47.jpg" alt="images"><br><a href="http://www.cnblogs.com/gw811/archive/2012/10/18/2730117.html" target="_blank" rel="external">参考</a><br>eg2：定义两个基本数据类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">int a=4;  //栈中的a引用变量指向方法区中的常量池中的4</div><div class="line">int b=4; //栈中的b引用变量也指向方法区中的常量池中的4</div><div class="line">if(a==b)&#123;</div><div class="line">System.out.println(&quot;a==b&quot;);</div><div class="line">&#125;</div><div class="line">else&#123;</div><div class="line">    System.out.println(&quot;a!=b&quot;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>结果：<br>输出：a==b<br>原因：a和b指向同一个常量区中常量4的地址。==比较两者地址相等。</p>
<p>不管是引用类型或基本数据类型使用“==”比较，实际上他们都先在栈空间创建了一个各自的变量引用如int a=1 或String b 等，并比较他们指向的地址的值；<br>    如果给基本数据类型赋值，实际是先将在方法区中的常量区中查找是否存在值1的地址（该值有一个唯一的地址），如果存在则将a指向该地址；不存在那么在常量区新建一个值为1的空间，并将该值得地址赋值给a。如果重新给a赋值如：a = 2，同理将a指向的地址改为常量区中值为2的地址。注意 int c =1，代表a和b指向同一个地址（常量区中1的地址）。<br>    如果使用new 实例化对象，对象的引用变量指向的是在堆中该对象实例化的对象地址；<br>   equal()方法比较的是引用变量指向地址最终指向的值。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/09/java/集合/2017-05-09/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/java/集合/2017-05-09/" itemprop="url">
                  java集合汇总
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-09T15:32:00+08:00">
                2017-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/09/java/集合/2017-05-09/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/09/java/集合/2017-05-09/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="java集合汇总"><a href="#java集合汇总" class="headerlink" title="java集合汇总"></a>java集合汇总</h1><p>几个主要结合的主要关系：<br>Collection<br>├List<br>│├LinkedList<br>│├ArrayList<br>│└Vector<br>│　└Stack<br>└Set<br>Map<br>├Hashtable<br>├HashMap<br>└WeakHashMap</p>
<p>一、集合与数组</p>
<p>数组：是用来存储对象（存储对象的引用，<a href="http://www.cnblogs.com/dubo-/p/5565677.html" target="_blank" rel="external">java的基本数据类型和引用类型</a>）和基本数据类型的一种容器，但是数组的长度在创建时候已经固定，不适合在对象数量未知的情况下使用。</p>
<p>集合：通俗的讲集合是一个存放数据的容器，准确的讲集合是一个 <em>存放数据对象引用的容器</em>，并非对象本身。（只能存储对象，对象类型可以不一样），集合长度可变，可在多数情况下使用。<br>注意：<br><em>集合存放的都是对象的引用</em>，那些看似存放着基本数据类型其实已经通过java自动装，拆箱操作装成了相应的对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List list =new ArrayList();</div><div class="line">list.add(12);</div><div class="line">System.out.println(list.get(0).getClass().getName());//Integer类型 自动装、拆箱</div></pre></td></tr></table></figure></p>
<p>二、层次关系</p>
<p>如图所示：图中，实线边框的是实现类，折线边框的是抽象类，而点线边框的是接口：</p>
<p>##集合框架图：<br><img src="http://oo4xlamjr.bkt.clouddn.com/K%28@UNQ68%60Y%5B%7B%7B5SRQ10FN15.png" alt="image"></p>
<p>Collection接口是集合类的根接口，Java中没有提供这个接口的直接的实现类。但是却让其被继承产生了两个接口，就是Set和List。Set中不能包含重复的元素（<a href="http://blog.csdn.net/zpf336/article/details/42397415" target="_blank" rel="external">set集合的去重原理</a>）。List是一个有序的集合，可以包含重复的元素，提供了按索引访问的方式。</p>
<p>Map是Java.util包中的另一个接口，它和Collection接口没有关系，是相互独立的，但是都属于集合类的一部分。Map包含了key-value对。Map不能包含重复的key，但是可以包含相同的value。</p>
<p>Iterator（迭代接口），所有的集合类，都实现了Iterator接口，所以不论Collection实际类型是哪一个都支持iterator()的方法，该方法返回一个迭代子。这是一个用于遍历集合中元素的接口，主要包含以下三种方法：<br>1.hasNext()是否还有下一个元素。<br>2.next()返回下一个元素。<br>3.remove()删除当前元素。<br>典型使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Iterator it = collection.iterator(); // 获得一个迭代子</div><div class="line">　　　　while(it.hasNext()) &#123;</div><div class="line">　　　　　　Object obj = it.next(); // 得到下一个元素</div><div class="line">　　　　&#125;</div></pre></td></tr></table></figure></p>
<p>注意：<br>Collection collection = new ArrayList();（这样写的好处在于，以后如果要引用不同的集合，可以省略很多麻烦。因为都是用Collection接口里的方法，java多态的提现，向上转型）<br>容器类对象在调用remove,contains等方法时需要比较对象是否相等地，这会涉及到对象类型的equals方法和hashcode方法。即，相等的对象应该有相等的hashcode.当然，如果是自定义的类型，需要重写这两个方法</p>
<p>三、几种重要的集合接口和类简介</p>
<p>1、List（有序、可重复）<br>List 接口继承了 Collection 接口以定义一个允许重复项的有序集合。该接口不但能够对列表的一部分进行处理，还添加了面向位置的操作。<br>有序的 collection（也称为序列）。此接口的用户可以对列表中每个元素的插入位置进行精确地控制。用户可以根据元素的整数索引（在列表中的位置）访问元素，并搜索列表中的元素<br>List里存放的对象是有序的，同时也是可以重复的，List关注的是索引，拥有一系列和索引相关的方法，查询速度快。因为往list集合里插入或删除数据时，会伴随着后面数据的移动，所有插入删除数据速度慢。<br>List 接口提供了特殊的迭代器，称为 ListIterator，除了允许 Iterator 接口提供的正常操作外，该迭代器还允许元素插入和替换，以及双向访问。还提供了一个方法来获取从列表中指定位置开始的列表迭代器<br>注意：尽管列表允许把自身作为元素包含在内，但建议要特别小心：在这样的列表上，equals 和 hashCode 方法不再是定义良好的。</p>
<p>2、Set（无序、不能重复）<br>Set接口同样是Collection接口的一个子接口，它表示数学意义上的集合概念。Set中不包含重复的元素，即Set中不存两个这样的元素e1和e2，使得e1.equals(e2)为true。由于Set接口提供的数据结构是数学意义上集合概念的抽象，因此它需要支持对象的添加、删除，而不需提供随机访问。故Set接口与Collection的接口相同。Set里存放的对象是无序，不能重复的，集合中的对象不按特定的方式排序，set可以存入null和boolean型。</p>
<p>3、Map（键值对、键唯一、值不唯一）<br>Map 接口不是 Collection 接口的继承。而是从自己的用于维护键-值关联的接口层次结构入手。按定义，该接口描述了从不重复的键到值的映射。<br>Map集合中存储的是键值对，键不能重复，值可以重复。根据键得到值，对map集合遍历时先得到键的set集合，对set集合进行遍历，得到相应的值。</p>
<p>四、遍历<br> 在类集中提供了以下四种的常见输出方式：<br>1）Iterator：迭代输出，是使用最多的输出方式。<br>2）ListIterator：是Iterator的子接口，专门用于输出List中的内容。<br>3）foreach输出：JDK1.5之后提供的新功能，可以输出数组或集合。<br>4）for循环<br>代码示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for的形式：for（int i=0;i&lt;arr.size();i++）&#123;...&#125;</div><div class="line">foreach的形式： for（int　i：arr）&#123;...&#125;</div><div class="line">iterator的形式：</div><div class="line">Iterator it = arr.iterator();</div><div class="line">while(it.hasNext())&#123; object o =it.next(); ...&#125;</div></pre></td></tr></table></figure></p>
<h2 id="集中常用的对应实现类总结"><a href="#集中常用的对应实现类总结" class="headerlink" title="集中常用的对应实现类总结"></a>集中常用的对应实现类总结</h2><p>五、（实现List集合接口）ArrayList、LinkedList，和Vector<br>ArrayList和LinkedList在用法上没有区别，但是在功能上还是有区别的。LinkedList经常用在增删操作较多而查询操作很少的情况下，ArrayList则相反。<br>即：ArrayList ：读快改慢，动态数组<br>     LinkedList：改快读慢，链表，队列，堆栈。<br> Vector是一种老的动态数组，是线程同步的，效率很低，一般不赞成使用。</p>
<p>六、Set集合（HashSet和TreeSet）<br>HashSet：使用哈希表实现的，HashSet集合是无序的，可以存入null当只能存一个，存入的对象或数据唯一。<br>TresSet：使用二叉树实现，集合是有序且自动排列好的（默认升序排序）。可以通过实现Comparable接口，重写接口里面的<br>compareTo(Object obj)方法来自定义排序，该方法返回一个整数值。该集合不允许放入null值。<br>参考：<a href="http://www.cnblogs.com/smiles125/p/5370204.html" target="_blank" rel="external">TreeSet和HashSet的区别</a><br>注意：<br>HashSet 和 TreeSet 都实现 Cloneable 接口。<br>HashSet要求放入的对象必须实现HashCode()方法，放入的对象，是以hashcode码作为标识的，而具有相同内容的 String对象，hashcode是一样，所以放入的内容不能重复。但是同一个类的对象可以放入不同的实例 。</p>
<p>七、Map集合</p>
<p>实现类：HashMap、Hashtable、LinkedHashMap和TreeMap</p>
<p>HashMap<br>HashMap是最常用的Map（无序的），它根据键的HashCode值存储数据，根据键可以直接获取它的值，具有很快的访问速度，遍历时，取得数据的顺序是完全随机的。因为键对象不可以重复，所以HashMap最多只允许一条记录的键为Null，允许多条记录的值为Null，是非同步的，效率高。</p>
<p>Hashtable<br>Hashtable与HashMap类似，是HashMap的线程安全版，它支持线程的同步，即任一时刻只有一个线程能写Hashtable，因此也导致了Hashtale在写入时会比较慢，它继承自Dictionary类，不同的是它不允许记录的键或者值为null，同时效率较低。</p>
<p>ConcurrentHashMap<br>线程安全，并且锁分离。ConcurrentHashMap内部使用段(Segment)来表示这些不同的部分，每个段其实就是一个小的hash table，它们有自己的锁。只要多个修改操作发生在不同的段上，它们就可以并发进行。</p>
<p>LinkedHashMap<br>LinkedHashMap保存了记录的插入顺序（有序的），在用Iteraor遍历LinkedHashMap时，先得到的记录肯定是先插入的，在遍历的时候会比HashMap慢，有HashMap的全部特性。</p>
<p>TreeMap<br>TreeMap实现SortMap接口，能够把它保存的记录根据键排序，默认是按键值的升序排序（自然顺序），也可以指定排序的比较器，当用Iterator遍历TreeMap时，得到的记录是排过序的。不允许key值为空，非同步的；所以在Map 中插入、删除和定位元素，HashMap 是最好的选择。但如果您要按顺序遍历键，那么TreeMap 会更好。<br>自定义排序例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">TreeMap&lt;Double,Object&gt; rf = new TreeMap&lt;Double,Object&gt;(new Comparator()&#123;  </div><div class="line">  </div><div class="line">   @Override  </div><div class="line">   public int compare(Object o1, Object o2) &#123;  </div><div class="line">    // TODO Auto-generated method stub   重写compare方法，降序排列</div><div class="line">    Double a = (Double)o1;  </div><div class="line">    Double b = (Double)o2;  </div><div class="line">    return -a.compareTo(b);  </div><div class="line">   &#125;&#125;);</div></pre></td></tr></table></figure></p>
<p>map的遍历</p>
<p>第一种：KeySet()<br>将Map中所有的键存入到set集合中。因为set具备迭代器。所有可以迭代方式取出所有的键，再根据get方法。获取每一个键对应的值。 keySet():迭代后只能通过get()取key 。<br>取到的结果会乱序，是因为取得数据行主键的时候，使用了HashMap.keySet()方法，而这个方法返回的Set结果，里面的数据是乱序排放的。<br>典型用法如下：<br>Map map = new HashMap();<br>map.put(“key1”,”lisi1”);<br>map.put(“key2”,”lisi2”);<br>map.put(“key3”,”lisi3”);<br>map.put(“key4”,”lisi4”);<br>//先获取map集合的所有键的set集合，keyset（）<br>Iterator it = map.keySet().iterator();<br> //获取迭代器<br>while(it.hasNext()){<br>Object key = it.next();<br>System.out.println(map.get(key));<br>}</p>
<p>第二种：entrySet（）<br>Set<map.entry<k,v>&gt; entrySet() //返回此映射中包含的映射关系的 Set 视图。（一个关系就是一个键-值对），就是把(key-value)作为一个整体一对一对地存放到Set集合当中的。Map.Entry表示映射关系。entrySet()：迭代后可以e.getKey()，e.getValue()两种方法来取key和value。返回的是Entry接口。<br>典型用法如下：<br>Map map = new HashMap();<br>map.put(“key1”,”lisi1”);<br>map.put(“key2”,”lisi2”);<br>map.put(“key3”,”lisi3”);<br>map.put(“key4”,”lisi4”);<br>//将map集合中的映射关系取出，存入到set集合<br>Iterator it = map.entrySet().iterator();<br>while(it.hasNext()){<br>Entry e =(Entry) it.next();<br>System.out.println(“键”+e.getKey () + “的值为” + e.getValue());<br>}<br>推荐使用第二种方式，即entrySet()方法，效率较高。<br>对于keySet其实是遍历了2次，一次是转为iterator，一次就是从HashMap中取出key所对于的value。而entryset只是遍历了第一次，它把key和value都放到了entry中，所以快了。两种遍历的遍历时间相差还是很明显的。</map.entry<k,v></p>
<p>八、主要实现类区别小结</p>
<p>Vector和ArrayList<br>1，vector是线程同步的，所以它也是线程安全的，而arraylist是线程异步的，是不安全的。如果不考虑到线程的安全因素，一般用arraylist效率比较高。<br>2，如果集合中的元素的数目大于目前集合数组的长度时，vector增长率为目前数组长度的100%，而arraylist增长率为目前数组长度的50%。如果在集合中使用数据量比较大的数据，用vector有一定的优势。<br>3，如果查找一个指定位置的数据，vector和arraylist使用的时间是相同的，如果频繁的访问数据，这个时候使用vector和arraylist都可以。而如果移动一个指定位置会导致后面的元素都发生移动，这个时候就应该考虑到使用linklist,因为它移动一个指定位置的数据时其它元素不移动。<br>ArrayList 和Vector是采用数组方式存储数据，此数组元素数大于实际存储的数据以便增加和插入元素，都允许直接序号索引元素，但是插入数据要涉及到数组元素移动等内存操作，所以索引数据快，插入数据慢，Vector由于使用了synchronized方法（线程安全）所以性能上比ArrayList要差，LinkedList使用双向链表实现存储，按序号索引数据需要进行向前或向后遍历，但是插入数据时只需要记录本项的前后项即可，所以插入数度较快。</p>
<p>Arraylist和linkedlist<br>1.ArrayList是实现了基于动态数组的数据结构，LinkedList基于链表的数据结构。<br>2.对于随机访问get和set，ArrayList觉得优于LinkedList，因为LinkedList要移动指针。<br>3.对于新增和删除操作add和remove，LinedList比较占优势，因为ArrayList要移动数据。 这一点要看实际情况的。若只对单条数据插入或删除，ArrayList的速度反而优于LinkedList。但若是批量随机的插入删除数据，LinkedList的速度大大优于ArrayList. 因为ArrayList每插入一条数据，要移动插入点及之后的所有数据。</p>
<p>HashMap与TreeMap<br>1、 HashMap通过hashcode对其内容进行快速查找，而TreeMap中所有的元素都保持着某种固定的顺序，如果你需要得到一个有序的结果你就应该使用TreeMap（HashMap中元素的排列顺序是不固定的）。<br>2、在Map 中插入、删除和定位元素，HashMap是最好的选择。但如果您要按自然顺序或自定义顺序遍历键，那么TreeMap会更好。使用HashMap要求添加的键类明确定义了hashCode()和 equals()的实现。<br>两个map中的元素一样，但顺序不一样，导致hashCode()不一样。<br>同样做测试：<br>在HashMap中，同样的值的map,顺序不同，equals时，false;<br>而在treeMap中，同样的值的map,顺序不同,equals时，true，说明，treeMap在equals()时是整理了顺序了的。</p>
<p>HashTable与HashMap<br>1、同步性:Hashtable是线程安全的，也就是说是同步的，而HashMap是线程序不安全的，不是同步的。<br>2、HashMap允许存在一个为null的key，多个为null的value 。<br>3、hashtable的key和value都不允许为null。</p>
<p>##面试小结<br>Java集合框架是最常被问到的Java面试问题，要理解Java技术强大特性就有必要掌握集合框架。这里有一些实用问题，常在核心Java面试中问到。<br>　　1、什么是Java集合API<br>　　Java集合框架API是用来表示和操作集合的统一框架，它包含接口、实现类、以及帮助程序员完成一些编程的算法。简言之，API在上层完成以下几件事：<br>　　● 编程更加省力，提高城程序速度和代码质量<br>　　● 非关联的API提高互操作性<br>　　● 节省学习使用新API成本<br>　　● 节省设计新API的时间<br>　　● 鼓励、促进软件重用<br>　　具体来说，有6个集合接口，最基本的是Collection接口，由三个接口Set、List、SortedSet继承，另外两个接口是Map、SortedMap，这两个接口不继承Collection，表示映射而不是真正的集合。<br>　　2、什么是Iterator<br>　　一些集合类提供了内容遍历的功能，通过java.util.Iterator接口。这些接口允许遍历对象的集合。依次操作每个元素对象。当使用 Iterators时，在获得Iterator的时候包含一个集合快照。通常在遍历一个Iterator的时候不建议修改集合本省。<br>　　3、Iterator与ListIterator有什么区别？<br>　　Iterator：只能正向遍历集合，适用于获取移除元素。ListIerator：继承Iterator，可以双向列表的遍历，同样支持元素的修改。<br>　　4、什么是HaspMap和Map？<br>　　Map是接口，Java 集合框架中一部分，用于存储键值对，HashMap是用哈希算法实现Map的类。<br>　　5、HashMap与HashTable有什么区别？对比Hashtable VS HashMap<br>　　两者都是用key-value方式获取数据。Hashtable是原始集合类之一（也称作遗留类）。HashMap作为新集合框架的一部分在Java2的1.2版本中加入。它们之间有一下区别：<br>　　● HashMap和Hashtable大致是等同的，除了非同步和空值（HashMap允许null值作为key和value，而Hashtable不可以）。<br>　　● HashMap没法保证映射的顺序一直不变，但是作为HashMap的子类LinkedHashMap，如果想要预知的顺序迭代（默认按照插入顺序），你可以很轻易的置换为HashMap，如果使用Hashtable就没那么容易了。<br>　　● HashMap不是同步的，而Hashtable是同步的。<br>　　● 迭代HashMap采用快速失败机制，而Hashtable不是，所以这是设计的考虑点。<br>　　6、在Hashtable上下文中同步是什么意思？<br>　　同步意味着在一个时间点只能有一个线程可以修改哈希表，任何线程在执行hashtable的更新操作前需要获取对象锁，其他线程等待锁的释放。<br>　　7、什么叫做快速失败特性<br>　　从高级别层次来说快速失败是一个系统或软件对于其故障做出的响应。一个快速失败系统设计用来即时报告可能会导致失败的任何故障情况，它通常用来停止正常的操作而不是尝试继续做可能有缺陷的工作。当有问题发生时，快速失败系统即时可见地发错错误告警。在Java中，快速失败与iterators有关。如果一个iterator在集合对象上创建了，其它线程欲“结构化”的修改该集合对象，并发修改异常 （ConcurrentModificationException） 抛出。<br>　　8、怎样使Hashmap同步？<br>　　HashMap可以通过Map m = Collections.synchronizedMap（hashMap）来达到同步的效果。<br>　　9、什么时候使用Hashtable，什么时候使用HashMap<br>　　基本的不同点是Hashtable同步HashMap不是的，所以无论什么时候有多个线程访问相同实例的可能时，就应该使用Hashtable，反之使用HashMap。非线程安全的数据结构能带来更好的性能。<br>　　如果在将来有一种可能—你需要按顺序获得键值对的方案时，HashMap是一个很好的选择，因为有HashMap的一个子类 LinkedHashMap。所以如果你想可预测的按顺序迭代（默认按插入的顺序），你可以很方便用LinkedHashMap替换HashMap。反观要是使用的Hashtable就没那么简单了。同时如果有多个线程访问HashMap，Collections.synchronizedMap（）可以代替，总的来说HashMap更灵活。</p>
<p>　　10、为什么Vector类认为是废弃的或者是非官方地不推荐使用？或者说为什么我们应该一直使用ArrayList而不是Vector</p>
<p>　　你应该使用ArrayList而不是Vector是因为默认情况下你是非同步访问的，Vector同步了每个方法，你几乎从不要那样做，通常有想要同步的是整个操作序列。同步单个的操作也不安全（如果你迭代一个Vector，你还是要加锁，以避免其它线程在同一时刻改变集合）.而且效率更慢。当然同样有锁的开销即使你不需要，这是个很糟糕的方法在默认情况下同步访问。你可以一直使用Collections.sychronizedList来装饰一个集合。</p>
<p>　　事实上Vector结合了“可变数组”的集合和同步每个操作的实现。这是另外一个设计上的缺陷。Vector还有些遗留的方法在枚举和元素获取的方法，这些方法不同于List接口，如果这些方法在代码中程序员更趋向于想用它。尽管枚举速度更快，但是他们不能检查如果集合在迭代的时候修改了，这样将导致问题。尽管以上诸多原因，Oracle也从没宣称过要废弃Vector。</p>
<p>###主要参考学习</p>
<ul>
<li><a href="http://blog.csdn.net/u014136713/article/details/52089156" target="_blank" rel="external">Java集合类详解</a></li>
<li><a href="http://blog.csdn.net/frankarmstrong/article/details/56003697" target="_blank" rel="external">JAVA集合类汇总</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/08/java/java编译原理/2017-05-08-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/08/java/java编译原理/2017-05-08-1/" itemprop="url">
                  java编译原理了解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-08T22:49:00+08:00">
                2017-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/08/java/java编译原理/2017-05-08-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/08/java/java编译原理/2017-05-08-1/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="java编译原理"><a href="#java编译原理" class="headerlink" title="java编译原理"></a>java编译原理</h1><p>java源代码(符合语言规范)–&gt;javac–&gt;.class(二进制文件)–&gt;jvm–&gt;机器语言(不同平台不同种类)</p>
<p>语义分析器、语法分析器、语义分析器、代码生成器<br>源码-&gt;token流-&gt;语法树-&gt;注解语法树-&gt;字节码<br><a href="">images</a></p>
<p>流程：</p>
<p>词法分析器：将源码转换为Token流<br>将源代码划分成一个个Token(找出java语言中的if，else，for等关键字)</p>
<p>语法分析器：将Token流转化为语法树<br>将上述的一个个Token组成一句句话（或者说成一句句代码块），检查这一句句话是不是符合Java语言规范(如if后面跟的是不是布尔判断表达式)</p>
<p>语义分析器：将语法树转化为注解语法树<br>将复杂的语法转化成简单的语法（eg.注解、foreach转化为for循环、去掉永不会用到的代码块）并做一些检查，添加一些代码(默认构造器)</p>
<p>代码生成器：将注解语法树转化为字节码(即将一个数据结构转化成另一个数据结构)</p>
<p>ps：要获取javac编译器，可以通过OpenJDK来下载源码，可以自己编译javac的源码，也可以通过调用jdk的</p>
<p>学习参考<br><a href="http://www.cnblogs.com/wade-luffy/p/5925728.html" target="_blank" rel="external">Javac编译原理</a><br><a href="http://blog.csdn.net/liupeng900605/article/details/7651500" target="_blank" rel="external"> Java编译原理（有感）</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/08/java/2017-05-08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="glinlf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="管弦丝竹，余音袅袅">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/08/java/2017-05-08/" itemprop="url">
                  java对象转型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-08T19:22:00+08:00">
                2017-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/08/java/2017-05-08/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2017/05/08/java/2017-05-08/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="java对象转型-向上转型和向下转型"><a href="#java对象转型-向上转型和向下转型" class="headerlink" title="java对象转型 向上转型和向下转型"></a>java对象转型 向上转型和向下转型</h1><ul>
<li><p>什么是对象转型?<br>对象转型是在继承的基础上而言的，对象类型转换主要包含向上转型和向下转型。继承是java面向对象的基本特征之一，是代码复用的一种机制，通过继承子类可以复用父类的方法等；如果父类的方法不满足子类的需求，子类可以通过重写父类的方法或者新增属于自己特性的方法对自身的功能加以扩展。</p>
<ul>
<li>1向上转型：<br>子类引用的对象转换为父类类型称为向上转型。子类的对象转为父类对象，此处父类对象可以是接口。<br>{eg：Annimal dog =new Dog();}</li>
<li>2向下转型：<br>父类引用的对象转换为子类类型称为向下转型。<br>{eg：Dog dog =new Animal();//不安全的向下转型<br>上述编译通过，但是运行时候报错，类型转换错误！<br>正确操作：<br>Annimal ad =new Dog()；<br>Dog dog = （Dog）ad；<br>}</li>
</ul>
</li>
<li><p>向上转型注意：</p>
<ul>
<li>前者是一个向上转型，Animal dog 引用指向new Dog();子类对象当成父类对象，只能调用父类的成员，如果子类重写了父类的方法就根据这个引用指向调用子类重写的这个方法（这个方法就是覆盖override）。这个调用过程就称为“动态绑定”。（即子类重写父类方法，向上转型对象调用该方法，方法指向子类中重写的方法）</li>
<li>向上转型时，父类指向子类引用对象会遗失除与父类对象共有的其他方法，也就是在转型过程中，子类的新有的方法都会遗失掉，在编译时，系统会提供找不到方法的错误。如： </li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> public class Animal &#123;</div><div class="line">         public void eat()&#123;</div><div class="line">                   System.out.println(&quot;animal eatting...&quot;);</div><div class="line">         &#125;</div><div class="line">&#125;</div><div class="line">class Bird extends Animal&#123;</div><div class="line">         public void eat()&#123;</div><div class="line">                   System.out.println(&quot;bird eatting...&quot;);</div><div class="line">         &#125;</div><div class="line">         public void fly()&#123;</div><div class="line">                   System.out.println(&quot;bird flying...&quot;);</div><div class="line">         &#125;</div><div class="line">&#125;</div><div class="line">class Main&#123;      </div><div class="line">         public static void main(String[] args) &#123;</div><div class="line">                   Animal b=new Bird(); //向上转型</div><div class="line">                   b.eat();</div><div class="line">         b.fly();  //此处提示在Animal中没有定义fly方法。</div><div class="line">｝</div></pre></td></tr></table></figure>
<ul>
<li>向下转型注意：<br>情况一：如果父类引用的对象如果引用的是指向的子类对象（即先向上转型），那么在向下转型的过程中是安全的。也就是编译是不会出错误的。此时对象可以调用子类所有的成员。<br>情况二：如果父类引用的对象是父类本身，那么在向下转型的过程中是不安全的，编译不会出错，但是运行时会出现java.lang.ClassCastException错误。它可以使用instanceof来避免出错此类错误。     </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> class Main&#123;      </div><div class="line">         public static void main(String[] args) &#123;</div><div class="line">                   Animal b=new Bird(); //先向上转型（父类引用对象指向子类对象）</div><div class="line">                   Bird bird = (Bird) b;//向下转型，编译和运行都不报错        </div><div class="line">                   Animal a=new Animal(); //（父类引用对象指向父类本身对象）</div><div class="line">                   Bird bird = (Bird) a;//不安全的向下转型，编译正常，运行报错（类型转换错误）        </div><div class="line">                   //解决方法 instance of</div><div class="line">                   if(a instanceof Bird)&#123;</div><div class="line">                            Bird bird=(Bird) a;</div><div class="line">                            bird.eat();</div><div class="line">                            bird.fly();</div><div class="line">                   &#125;</div><div class="line">｝</div></pre></td></tr></table></figure>
<ul>
<li>总结：<br>1、父类引用可以指向子类对象，子类引用不能指向父类对象。<br>2、把子类对象直接赋给父类引用叫upcasting向上转型，向上转型不用强制转型。<br>3、把指向子类对象的父类引用赋给子类引用叫向下转型（downcasting），要强制转型。<br>4、upcasting 会丢失子类特有的方法,但是子类overriding 父类的方法，子类方法有效 。<br>5、向上转型的作用，减少重复代码，父类为参数，调有时用子类作为参数，就是利用了向上转型。这样使代码变得简洁。体现了JAVA的抽象编程思想。</li>
</ul>
<p><a href="http://www.cnblogs.com/fickleness/archive/2013/06/21/3149011.html" target="_blank" rel="external">参考:夜雨阑珊</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="glinlf" />
          <p class="site-author-name" itemprop="name">glinlf</p>
           
              <p class="site-description motion-element" itemprop="description">心之所向 步履维艰</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">glinlf</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

</body>
</html>
